var e={d:(t,r)=>{for(var s in r)e.o(r,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:r[s]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},t={};e.d(t,{AU:()=>o,Bw:()=>Z,CI:()=>p,CO:()=>I,E8:()=>A,Ep:()=>_,F2:()=>a,FG:()=>h,FW:()=>H,Fn:()=>k,HJ:()=>M,HO:()=>s,HV:()=>g,IX:()=>j,K9:()=>U,Kg:()=>u,LS:()=>re,M4:()=>q,OB:()=>d,Pw:()=>f,QR:()=>N,RG:()=>T,RI:()=>J,TD:()=>v,TH:()=>w,Tj:()=>i,UQ:()=>B,Us:()=>ee,WY:()=>X,Wm:()=>Q,_g:()=>C,aP:()=>V,bC:()=>P,bN:()=>b,bm:()=>K,de:()=>L,f9:()=>z,gh:()=>F,j9:()=>W,no:()=>E,oC:()=>c,px:()=>D,qz:()=>G,sK:()=>$,tB:()=>x,tI:()=>se,tW:()=>O,u0:()=>l,uJ:()=>te,uj:()=>n,wW:()=>R,w_:()=>S,wx:()=>y,yT:()=>r,yy:()=>m,zA:()=>Y});const r=(e,t)=>Math.random()*(t-e)+e,s=(e,t)=>Math.floor(r(e,t)),a=e=>.0174532925*e,n=e=>57.295779513*e,o=(e,t,r)=>e<t?t:e>r?r:e,l=e=>0|Math.round(e),i=(e,t,r,s,a)=>r==t?s:(e-t)*(a-s)/(r-t)+s,c=e=>{let t=parseFloat(e);return isNaN(t)?0:t},u=e=>{let t=e.match(/\-?\d*\.?\d*/gm);return t?t[0]:"0"},h=(e,t)=>{let r=t.toString().split(".")[1];return Number(e).toFixed(r?r.length:0)},p=()=>"ontouchstart"in window.document.documentElement,m=e=>new Promise(t=>setTimeout(t,e)),g=(e,t=1)=>e[e.length-t],d=e=>navigator.clipboard.writeText(e),f=()=>navigator.clipboard.readText(),y=e=>(new TextEncoder).encode(e),$=e=>"object"==typeof e&&null!==e?Array.isArray(e)?[...e]:{...e}:e;function b(e,t){if(e===t)return!0;if("object"!=typeof e||"object"!=typeof t||null===e||null===t)return!1;const r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(let s of r)if(e[s]!==t[s])return!1;return!0}class w{constructor(e,t){this.send_cb=e,this.period=t}async send(e,t=!0){if(this.sending)this.cache=e;else if(this.sending=!0,await this.send_cb(e),await m(this.period),this.sending=!1,void 0!==this.cache&&(t||!b(this.cache,e))){let e=this.cache;this.cache=void 0,this.send(e)}}}function T(e,t){let r=document.createElement("a");r.href=window.URL.createObjectURL(e),r.download=t,r.click()}async function C(){let e,t;return{wait:new Promise((r,s)=>{e=r,t=s}),resolve:e,reject:t}}function I(e){const t=[];let r=!1;for(let s=0,a=0,n=0;n<e.length;n++){let o=e[n],l=e[n+1];t[s]=t[s]||[],t[s][a]=t[s][a]||"",'"'==o&&r&&'"'==l?(t[s][a]+=o,++n):'"'!=o?";"!=o&&","!=o||r?"\r"!=o||"\n"!=l||r?"\n"==o&&!r||"\r"==o&&!r?(++s,a=0):t[s][a]+=o:(++s,a=0,++n):++a:r=!r}return t}function O(e){let t=new Uint32Array([0]);for(let r=0;r<e.length;r++)t[0]+=(t[0]<<5)+e.charCodeAt(r);return t[0]}function N(e){let t=new Uint32Array(1);t[0]=0,t[0]=~t[0];let r="string"==typeof e;for(let s=0;s<e.length;s++){t[0]^=r?e[s].charCodeAt(0):e[s];for(let e=0;e<8;e++)t[0]=1&t[0]?t[0]/2^79764919:t[0]/2}return t[0]=~t[0],t[0]}function v(e){if(e){let t=document.createElement("style");t.innerText=e,document.head.appendChild(t)}return null}function S(e){for(;e.firstChild;)e.removeChild(e.lastChild)}const x=()=>(new Date).getTime(),M=e=>new Date(e-6e4*(new Date).getTimezoneOffset());class q{constructor(e,t,r){this.tout=e,this.cb=t,this.time=r}setTime(e){this.time=e}onReady(e){this.cb=e}start(){this.tmr||(this.tout?setTimeout(()=>{this.tmr=null,this.cb()},this.time):setInterval(this.cb,this.time))}restart(){this.stop(),this.start()}stop(){this.tout?clearTimeout(this.tmr):clearInterval(this.tmr),this.tmr=null}running(){return null!=this.tmr}}class j extends q{constructor(e,t){super(!1,e,t)}}class _ extends q{constructor(e,t){super(!0,e,t)}}const W=()=>new Promise(e=>requestAnimationFrame(()=>setTimeout(e,0))),E=e=>{if(!Array.isArray(e))return e.clientWidth||e.clientHeight;for(let t of e)if(!E(t))return 0;return 1};async function F(e,t=null,r=10){for(;!E(e)&&--r;)await W();return r||(e=null),t&&t(e),e}const R=e=>"#"+Number(e).toString(16).padStart(6,"0"),A=e=>{let t=e=>parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3],16),r=e=>parseInt(e.slice(1,7),16);if(e&&"#"==e[0])switch(e.length){case 4:return t(e);case 5:return t(e)|parseInt(e[4]+e[4],16)<<24;case 7:return r(e);case 9:return r(e)|parseInt(e.slice(7,9),16)<<24}return 0},P=(e,t,r)=>e<<16|t<<8|r,k=P,H=(e,t,r)=>(248&e)<<8|(252&t)<<3|r>>3,D=(e,t,r)=>192&e|(224&t)>>2|(224&r)>>5,U=e=>[e>>16&255,e>>8&255,255&e,e>>24&255];function B(e,t,r,s){if(!isNaN(t)&&!isNaN(r))return isNaN(s)?`rgb(${e},${t},${r})`:`rgba(${e},${t},${r},${Number.isInteger(s)?s/255:s})`;if("number"==typeof e)return R(e);if("string"==typeof e){if(!e.startsWith("#"))return parseInt(e)?B(parseInt(e)):e;switch(e.length){case 4:case 5:return"#"+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+(5==e.length?e[4]+e[4]:"");case 7:case 9:return e;default:return"#000000"}}}const L=(e,t,r)=>{e%=360;let s=t*Math.min(r,1-r),a=(t,a=(t+e/30)%12)=>r-s*Math.max(Math.min(a-3,9-a,1),-1);return"rgb("+Math.round(255*a(0))+","+Math.round(255*a(8))+","+Math.round(255*a(4))+")"},K=(e,t,r)=>L(e/255*360,t/255,r/255),J=(e,t,r)=>K(e,t,r/2),z=(e,t)=>{let r=0;for(let s=0;s<3;s++){let s=(16711680&e)>>16;s=Math.min(255,Math.floor((s+1)*t)),r<<=8,r|=s,e<<=8}return r},G=e=>{if((e=B(e)).startsWith("#"))return e.slice(1).match(/.{2}/g).map(e=>parseInt(e,16));if(e.startsWith("rgb")){let t=e.match(/\((.+?)\)/);if(t)return t[1].split(",").map(Number)}return[0,0,0]},Q=e=>{let t=0;return G(e).forEach((e,r)=>r<3&&(t+=e)),t/3},X=e=>(e=G(e),Math.max(...e)-Math.min(...e)),V=(e,t=128)=>Q(e)<t?"white":"black";function Y(e,t,r){return new Promise(s=>{let a=new XMLHttpRequest;a.onreadystatechange=()=>{a.readyState==XMLHttpRequest.DONE&&s(200==a.status)},a.upload.onprogress=e=>{e.lengthComputable&&r(parseInt(e.loaded/e.total*100))},a.onerror=e=>s(!1),a.open("POST",e,!0),a.send(t)})}async function Z(e,t={}){let r,s,a=null;t.timeout&&(r=new AbortController,s=setTimeout(()=>r.abort(),t.timeout),t.signal=r.signal);try{a=await fetch(e,t)}catch(e){}return clearTimeout(s),a&&a.ok?a:null}async function ee(e,t=5e3){return Z(e,{timeout:t})}class te{clear(){this._queue.forEach(e=>e.res(null)),this._queue=[]}async fetch(e,t){return new Promise(r=>{this._queue.push({url:e,params:t,res:r}),1==this._queue.length&&this._next()})}async _next(){let e=this._queue[0];e.res(await Z(e.url,e.params)),this._queue.shift(),this._queue.length&&this._next()}_queue=[]}class re{static has(e){return localStorage.hasOwnProperty(e)}static get(e){return JSON.parse(localStorage.getItem(e))}static remove(e){localStorage.removeItem(e)}static set(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(e){console.error(e)}}static init(e,t){re.has(e)||re.set(e,t)}}function se(e,t=0){if(t>10)return e;const r=[];return function(e){const t=e.split("\n");let r="",s=[];for(let e of t){const t=/^(\s*)([-]|\d+\.)\s+(.*)$/.exec(e);if(t){const e=t[1].length,a=t[2].match(/^\d/)?"ol":"ul",n=t[3],o=Math.floor(e/2);if(!s.length){r+=`<${a}><li>${n}`,s.push({type:a,level:o});continue}const l=s[s.length-1];if(o>l.level)r+=`<${a}><li>${n}`,s.push({type:a,level:o});else if(o===l.level)r+=`</li><li>${n}`;else{for(;s.length&&s[s.length-1].level>=o;)r+=`</li></${s.pop().type}>`;s.length&&s[s.length-1].type===a?r+=`<li>${n}`:(r+=`<${a}><li>${n}`,s.push({type:a,level:o}))}}else{for(;s.length;)r+=`</li></${s.pop().type}>`;r+=e+"\n"}}for(;s.length;)r+=`</li></${s.pop().type}>`;return r}(e=e.replace(/```([\s\S]*?)```/g,(e,t)=>{const s=r.length;return r.push(`<pre><code>${t.replace(/[&<>"']/g,e=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}[e]))}</code></pre>`),`§CODEBLOCK${s}§`})).replace(/^---$/gm,"<hr>").replace(/!\[([^\]]*)\]\(([^)]+)\)/g,'<img src="$2" alt="$1">').replace(/^###### (.*)$/gm,"<h6>$1</h6>").replace(/^##### (.*)$/gm,"<h5>$1</h5>").replace(/^#### (.*)$/gm,"<h4>$1</h4>").replace(/^### (.*)$/gm,"<h3>$1</h3>").replace(/^## (.*)$/gm,"<h2>$1</h2>").replace(/^# (.*)$/gm,"<h1>$1</h1>").replace(/(^>.*(?:\n>.*)*)/gm,e=>`<blockquote>${se(e.split("\n").map(e=>e.replace(/^>\s?/,"")).join("\n"),t+1)}</blockquote>`).replace(/\[spoiler="([^"]+)"\]([\s\S]*?)\[\/spoiler\]/g,(e,r,s)=>`<details><summary>${r}</summary>${se(s,t+1)}</details>`).replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2">$1</a>').replace(/`([^`]+)`/g,"<code>$1</code>").replace(/\*\*(.+?)\*\*/g,"<strong>$1</strong>").replace(/(^|[\s>])\*([^*\s][^*]*?)\*(?=[\s<]|$)/g,"$1<em>$2</em>").replace(/^(?!<h\d|<ul|<ol|<pre|<p|<blockquote|<code|<hr|<img|<details|<summary)(.+)$/gm,"<p>$1</p>").replace(/§CODEBLOCK(\d+)§/g,(e,t)=>r[t])}const ae=t.TH,ne=t.uJ,oe=t.K9,le=t.IX,ie=t.LS,ce=t.Ep,ue=t.M4,he=t.TD,pe=t.f9,me=t.no,ge=t.w_,de=t.Pw,fe=t.OB,ye=t.E8,$e=t.AU,be=t.aP,we=t.QR,Te=t.uj,Ce=t.WY,Ie=t.RG,Oe=t.wx,Ne=t.Bw,ve=t.Us,Se=t.Kg,xe=t.FG,Me=t.tW,qe=t.de,je=t.bm,_e=t.RI,We=t.zA,Ee=t.wW,Fe=t.CI,Re=t.HV,Ae=t.HJ,Pe=t.sK,ke=t._g,He=t.UQ,De=t.Tj,Ue=t.Wm,Be=t.tB,Le=t.CO,Ke=t.oC,Je=t.tI,ze=t.F2,Ge=t.yT,Qe=t.HO,Xe=t.px,Ve=t.bC,Ye=t.FW,Ze=t.Fn,et=t.u0,tt=t.bN,rt=t.yy,st=t.qz,at=t.j9,nt=t.gh;export{ae as DelaySender,ne as FetchQueue,oe as HEXtoRGB,le as Interval,ie as LS,ce as Timeout,ue as Timer,he as addStyle,pe as adjustColor,me as checkRender,ge as clearNode,de as clipRead,fe as clipWrite,ye as colorToInt,$e as constrain,be as contrastColor,we as crc32,Te as degrees,Ce as deltaColor,Ie as download,Oe as encodeText,Ne as fetchT,ve as fetchTimeout,Se as findFloat,xe as formatToStep,Me as hash,qe as hsl2rgb,je as hsl2rgb8,_e as hsv2rgb8,We as httpPost,Ee as intToColor,Fe as isTouch,Re as last,Ae as localTime,Pe as makeCopy,ke as makeDefer,He as makeWebColor,De as map,Ue as midColor,Be as now,Le as parseCSV,Ke as parseFloatNoNaN,Je as parseMD,ze as radians,Ge as random,Qe as randomInt,Xe as rgbTo233,Ve as rgbTo24,Ye as rgbTo565,Ze as rgbTo888,et as roundInt,tt as shallowEqual,rt as sleep,st as splitColor,at as waitFrame,nt as waitRender};