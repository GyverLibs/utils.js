var t={d:(e,s)=>{for(var r in s)t.o(s,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:s[r]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},e={};t.d(e,{AU:()=>i,Bw:()=>tt,CI:()=>p,CO:()=>v,E8:()=>W,Ep:()=>M,F2:()=>n,FG:()=>u,FW:()=>P,Fn:()=>R,HJ:()=>_,HO:()=>r,HV:()=>g,IX:()=>N,K9:()=>H,Kg:()=>c,LS:()=>it,M4:()=>O,OB:()=>m,Pw:()=>d,QR:()=>I,RG:()=>V,RI:()=>K,TD:()=>x,TH:()=>Y,Tj:()=>l,UQ:()=>U,Us:()=>et,WY:()=>Q,Wm:()=>G,Y4:()=>rt,Zg:()=>nt,_g:()=>T,aP:()=>X,bC:()=>F,bN:()=>$,bk:()=>at,bm:()=>L,de:()=>B,f9:()=>J,g7:()=>y,gh:()=>j,j9:()=>q,no:()=>E,oC:()=>h,px:()=>D,qz:()=>z,sK:()=>w,tB:()=>S,tI:()=>ot,tW:()=>C,u0:()=>o,uJ:()=>st,uj:()=>a,wW:()=>A,w_:()=>k,wx:()=>b,yT:()=>s,yy:()=>f,zA:()=>Z});const s=(t,e)=>Math.random()*(e-t)+t,r=(t,e)=>Math.floor(s(t,e)),n=t=>.0174532925*t,a=t=>57.295779513*t,i=(t,e,s)=>t<e?e:t>s?s:t,o=t=>0|Math.round(t),l=(t,e,s,r,n)=>s==e?r:(t-e)*(n-r)/(s-e)+r,h=t=>{let e=parseFloat(t);return isNaN(e)?0:e},c=t=>{let e=t.match(/\-?\d*\.?\d*/gm);return e?e[0]:"0"},u=(t,e)=>{let s=e.toString().split(".")[1];return Number(t).toFixed(s?s.length:0)},p=()=>"ontouchstart"in window.document.documentElement,f=t=>new Promise(e=>setTimeout(e,t)),g=(t,e=1)=>t[t.length-e],m=t=>navigator.clipboard.writeText(t),d=()=>navigator.clipboard.readText(),b=t=>(new TextEncoder).encode(t),y=t=>(new TextDecoder).decode(t),w=t=>"object"==typeof t&&null!==t?Array.isArray(t)?[...t]:{...t}:t;function $(t,e){if(t===e)return!0;if("object"!=typeof t||"object"!=typeof e||null===t||null===e)return!1;const s=Object.keys(t),r=Object.keys(e);if(s.length!==r.length)return!1;for(let r of s)if(t[r]!==e[r])return!1;return!0}async function T(){let t,e;return{wait:new Promise((s,r)=>{t=s,e=r}),resolve:t,reject:e}}function v(t){const e=[];let s=!1;for(let r=0,n=0,a=0;a<t.length;a++){let i=t[a],o=t[a+1];e[r]=e[r]||[],e[r][n]=e[r][n]||"",'"'==i&&s&&'"'==o?(e[r][n]+=i,++a):'"'!=i?";"!=i&&","!=i||s?"\r"!=i||"\n"!=o||s?"\n"==i&&!s||"\r"==i&&!s?(++r,n=0):e[r][n]+=i:(++r,n=0,++a):++n:s=!s}return e}function C(t){let e=new Uint32Array([0]);for(let s=0;s<t.length;s++)e[0]+=(e[0]<<5)+t.charCodeAt(s);return e[0]}function I(t){let e=new Uint32Array(1);e[0]=0,e[0]=~e[0];let s="string"==typeof t;for(let r=0;r<t.length;r++){e[0]^=s?t[r].charCodeAt(0):t[r];for(let t=0;t<8;t++)e[0]=1&e[0]?e[0]/2^79764919:e[0]/2}return e[0]=~e[0],e[0]}function x(t){if(t){let e=document.createElement("style");e.innerText=t,document.head.appendChild(e)}return null}function k(t){for(;t.firstChild;)t.removeChild(t.lastChild)}const S=()=>(new Date).getTime(),_=t=>new Date(t-6e4*(new Date).getTimezoneOffset());class O{constructor(t,e,s){this.tout=t,this.cb=e,this.time=s}setTime(t){this.time=t}onReady(t){this.cb=t}start(){this.tmr||(this.tout?setTimeout(()=>{this.tmr=null,this.cb()},this.time):setInterval(this.cb,this.time))}restart(){this.stop(),this.start()}stop(){this.tout?clearTimeout(this.tmr):clearInterval(this.tmr),this.tmr=null}running(){return null!=this.tmr}}class N extends O{constructor(t,e){super(!1,t,e)}}class M extends O{constructor(t,e){super(!0,t,e)}}const q=()=>new Promise(t=>requestAnimationFrame(()=>setTimeout(t,0))),E=t=>{if(!Array.isArray(t))return t.clientWidth||t.clientHeight;for(let e of t)if(!E(e))return 0;return 1};async function j(t,e=null,s=10){for(;!E(t)&&--s;)await q();return s||(t=null),e&&e(t),t}const A=t=>"#"+Number(t).toString(16).padStart(6,"0"),W=t=>{let e=t=>parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3],16),s=t=>parseInt(t.slice(1,7),16);if(t&&"#"==t[0])switch(t.length){case 4:return e(t);case 5:return e(t)|parseInt(t[4]+t[4],16)<<24;case 7:return s(t);case 9:return s(t)|parseInt(t.slice(7,9),16)<<24}return 0},F=(t,e,s)=>t<<16|e<<8|s,R=F,P=(t,e,s)=>(248&t)<<8|(252&e)<<3|s>>3,D=(t,e,s)=>192&t|(224&e)>>2|(224&s)>>5,H=t=>[t>>16&255,t>>8&255,255&t,t>>24&255];function U(t,e,s,r){if(!isNaN(e)&&!isNaN(s))return isNaN(r)?`rgb(${t},${e},${s})`:`rgba(${t},${e},${s},${Number.isInteger(r)?r/255:r})`;if("number"==typeof t)return A(t);if("string"==typeof t){if(!t.startsWith("#"))return parseInt(t)?U(parseInt(t)):t;switch(t.length){case 4:case 5:return"#"+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+(5==t.length?t[4]+t[4]:"");case 7:case 9:return t;default:return"#000000"}}}const B=(t,e,s)=>{t%=360;let r=e*Math.min(s,1-s),n=(e,n=(e+t/30)%12)=>s-r*Math.max(Math.min(n-3,9-n,1),-1);return"rgb("+Math.round(255*n(0))+","+Math.round(255*n(8))+","+Math.round(255*n(4))+")"},L=(t,e,s)=>B(t/255*360,e/255,s/255),K=(t,e,s)=>L(t,e,s/2),J=(t,e)=>{let s=0;for(let r=0;r<3;r++){let r=(16711680&t)>>16;r=Math.min(255,Math.floor((r+1)*e)),s<<=8,s|=r,t<<=8}return s},z=t=>{if((t=U(t)).startsWith("#"))return t.slice(1).match(/.{2}/g).map(t=>parseInt(t,16));if(t.startsWith("rgb")){let e=t.match(/\((.+?)\)/);if(e)return e[1].split(",").map(Number)}return[0,0,0]},G=t=>{let e=0;return z(t).forEach((t,s)=>s<3&&(e+=t)),e/3},Q=t=>(t=z(t),Math.max(...t)-Math.min(...t)),X=(t,e=128)=>G(t)<e?"white":"black";class Y{constructor(t,e){this.send_cb=t,this.period=e}async send(t,e=!0){if(this.sending)this.cache=t;else if(this.sending=!0,await this.send_cb(t),await f(this.period),this.sending=!1,void 0!==this.cache&&(e||!$(this.cache,t))){let t=this.cache;this.cache=void 0,this.send(t)}}}function V(t,e){let s=document.createElement("a");s.href=window.URL.createObjectURL(t),s.download=e,s.click()}function Z(t,e,s){return new Promise(r=>{let n=new XMLHttpRequest;n.onreadystatechange=()=>{n.readyState==XMLHttpRequest.DONE&&r(200==n.status)},n.upload.onprogress=t=>{t.lengthComputable&&s(parseInt(t.loaded/t.total*100))},n.onerror=t=>r(!1),n.open("POST",t,!0),n.send(e)})}async function tt(t,e={}){let s,r,n=null;e.timeout&&(s=new AbortController,r=setTimeout(()=>s.abort(),e.timeout),e.signal=s.signal);try{n=await fetch(t,e)}catch(t){}return clearTimeout(r),n&&n.ok?n:null}async function et(t,e=5e3){return tt(t,{timeout:e})}class st{clear(){this._queue.forEach(t=>t.res(null)),this._queue=[]}async fetch(t,e){return new Promise(s=>{this._queue.push({url:t,params:e,res:s}),1==this._queue.length&&this._next()})}async _next(){let t=this._queue[0];t.res(await tt(t.url,t.params)),this._queue.shift(),this._queue.length&&this._next()}_queue=[]}class rt{ontext=null;constructor(t=/\r?\n/,e=!1){this.eol=t,this.skip=e}reset(){this._buf=""}write(t){if(!this.ontext)return;if(!this.eol)return void this.ontext(t);this._buf+=t;let e=this._buf.split(this.eol);1!=e.length&&(e[e.length-1].length?this._buf=e.pop():(this._buf="",e.pop()),this.skip&&(e.shift(),this.skip=!1),e.forEach(t=>this.ontext(t)))}_buf=""}class nt{constructor(){this.chunks=[],this.length=0}clear(){this.chunks=[]}push(t){return this.chunks.push(t),this.length+=t.length,!0}shift(t){t>this.length&&(t=this.length);const e=new Uint8Array(t);let s=0;for(;t>0;){const r=this.chunks[0];t>=r.length?(e.set(r,s),s+=r.length,t-=r.length,this.chunks.shift(),this.length-=r.length):(e.set(r.subarray(0,t),s),this.chunks[0]=r.subarray(t),this.length-=t,t=0)}return e}shiftAll(){return this.shift(this.length)}}class at{constructor(){this.events={}}on(t,e){return this.events[t]||(this.events[t]=[]),this.events[t].push(e),()=>this.off(t,e)}once(t,e){const s=this.on(t,(...t)=>{s(),e(...t)})}emit(t,...e){if(this.events[t])for(let s of this.events[t])s(...e)}off(t,e){this.events[t]&&(this.events[t]=this.events[t].filter(t=>t!==e))}offAll(t){delete this.events[t]}}class it{static has(t){return localStorage.hasOwnProperty(t)}static get(t){return JSON.parse(localStorage.getItem(t))}static remove(t){localStorage.removeItem(t)}static set(t,e){try{localStorage.setItem(t,JSON.stringify(e))}catch(t){console.error(t)}}static init(t,e){it.has(t)||it.set(t,e)}}function ot(t,e=0){if(e>10)return t;const s=[];return function(t){const e=t.split("\n");let s="",r=[];for(let t of e){const e=/^(\s*)([-]|\d+\.)\s+(.*)$/.exec(t);if(e){const t=e[1].length,n=e[2].match(/^\d/)?"ol":"ul",a=e[3],i=Math.floor(t/2);if(!r.length){s+=`<${n}><li>${a}`,r.push({type:n,level:i});continue}const o=r[r.length-1];if(i>o.level)s+=`<${n}><li>${a}`,r.push({type:n,level:i});else if(i===o.level)s+=`</li><li>${a}`;else{for(;r.length&&r[r.length-1].level>=i;)s+=`</li></${r.pop().type}>`;r.length&&r[r.length-1].type===n?s+=`<li>${a}`:(s+=`<${n}><li>${a}`,r.push({type:n,level:i}))}}else{for(;r.length;)s+=`</li></${r.pop().type}>`;s+=t+"\n"}}for(;r.length;)s+=`</li></${r.pop().type}>`;return s}(t=t.replace(/```([\s\S]*?)```/g,(t,e)=>{const r=s.length;return s.push(`<pre><code>${e.replace(/[&<>"']/g,t=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}[t]))}</code></pre>`),`§CODEBLOCK${r}§`})).replace(/^---$/gm,"<hr>").replace(/!\[([^\]]*)\]\(([^)]+)\)/g,'<img src="$2" alt="$1">').replace(/^###### (.*)$/gm,"<h6>$1</h6>").replace(/^##### (.*)$/gm,"<h5>$1</h5>").replace(/^#### (.*)$/gm,"<h4>$1</h4>").replace(/^### (.*)$/gm,"<h3>$1</h3>").replace(/^## (.*)$/gm,"<h2>$1</h2>").replace(/^# (.*)$/gm,"<h1>$1</h1>").replace(/(^>.*(?:\n>.*)*)/gm,t=>`<blockquote>${ot(t.split("\n").map(t=>t.replace(/^>\s?/,"")).join("\n"),e+1)}</blockquote>`).replace(/\[spoiler="([^"]+)"\]([\s\S]*?)\[\/spoiler\]/g,(t,s,r)=>`<details><summary>${s}</summary>${ot(r,e+1)}</details>`).replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2">$1</a>').replace(/`([^`]+)`/g,"<code>$1</code>").replace(/\*\*(.+?)\*\*/g,"<strong>$1</strong>").replace(/(^|[\s>])\*([^*\s][^*]*?)\*(?=[\s<]|$)/g,"$1<em>$2</em>").replace(/^(?!<h\d|<ul|<ol|<pre|<p|<blockquote|<code|<hr|<img|<details|<summary)(.+)$/gm,"<p>$1</p>").replace(/§CODEBLOCK(\d+)§/g,(t,e)=>s[e])}const lt=e.TH,ht=e.bk,ct=e.uJ,ut=e.K9,pt=e.IX,ft=e.LS,gt=e.Zg,mt=e.Y4,dt=e.Ep,bt=e.M4,yt=e.TD,wt=e.f9,$t=e.no,Tt=e.w_,vt=e.Pw,Ct=e.OB,It=e.E8,xt=e.AU,kt=e.aP,St=e.QR,_t=e.g7,Ot=e.uj,Nt=e.WY,Mt=e.RG,qt=e.wx,Et=e.Bw,jt=e.Us,At=e.Kg,Wt=e.FG,Ft=e.tW,Rt=e.de,Pt=e.bm,Dt=e.RI,Ht=e.zA,Ut=e.wW,Bt=e.CI,Lt=e.HV,Kt=e.HJ,Jt=e.sK,zt=e._g,Gt=e.UQ,Qt=e.Tj,Xt=e.Wm,Yt=e.tB,Vt=e.CO,Zt=e.oC,te=e.tI,ee=e.F2,se=e.yT,re=e.HO,ne=e.px,ae=e.bC,ie=e.FW,oe=e.Fn,le=e.u0,he=e.bN,ce=e.yy,ue=e.qz,pe=e.j9,fe=e.gh;export{lt as DelaySender,ht as EventEmitter,ct as FetchQueue,ut as HEXtoRGB,pt as Interval,ft as LS,gt as ShiftBuffer,mt as StreamSplitter,dt as Timeout,bt as Timer,yt as addStyle,wt as adjustColor,$t as checkRender,Tt as clearNode,vt as clipRead,Ct as clipWrite,It as colorToInt,xt as constrain,kt as contrastColor,St as crc32,_t as decodeText,Ot as degrees,Nt as deltaColor,Mt as download,qt as encodeText,Et as fetchT,jt as fetchTimeout,At as findFloat,Wt as formatToStep,Ft as hash,Rt as hsl2rgb,Pt as hsl2rgb8,Dt as hsv2rgb8,Ht as httpPost,Ut as intToColor,Bt as isTouch,Lt as last,Kt as localTime,Jt as makeCopy,zt as makeDefer,Gt as makeWebColor,Qt as map,Xt as midColor,Yt as now,Vt as parseCSV,Zt as parseFloatNoNaN,te as parseMD,ee as radians,se as random,re as randomInt,ne as rgbTo233,ae as rgbTo24,ie as rgbTo565,oe as rgbTo888,le as roundInt,he as shallowEqual,ce as sleep,ue as splitColor,pe as waitFrame,fe as waitRender};