var e={d:(t,s)=>{for(var r in s)e.o(s,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:s[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},t={};e.d(t,{AU:()=>o,Bw:()=>ee,CI:()=>p,CO:()=>v,E8:()=>A,Ep:()=>q,F2:()=>n,FG:()=>u,FW:()=>P,Fn:()=>R,HJ:()=>S,HO:()=>r,HV:()=>f,IX:()=>M,K9:()=>H,Kg:()=>h,LS:()=>ae,M4:()=>N,OB:()=>g,Pw:()=>d,QR:()=>_,RG:()=>V,RI:()=>K,TD:()=>I,TH:()=>Y,Tj:()=>l,UQ:()=>U,Us:()=>te,WY:()=>Q,Wm:()=>G,Y4:()=>re,_g:()=>T,aP:()=>X,bC:()=>F,bN:()=>w,bk:()=>ne,bm:()=>L,de:()=>B,f9:()=>J,g7:()=>y,gh:()=>k,j9:()=>E,no:()=>j,oC:()=>c,px:()=>D,qz:()=>z,sK:()=>$,tB:()=>O,tI:()=>oe,tW:()=>C,u0:()=>i,uJ:()=>se,uj:()=>a,wW:()=>W,w_:()=>x,wx:()=>b,yT:()=>s,yy:()=>m,zA:()=>Z});const s=(e,t)=>Math.random()*(t-e)+e,r=(e,t)=>Math.floor(s(e,t)),n=e=>.0174532925*e,a=e=>57.295779513*e,o=(e,t,s)=>e<t?t:e>s?s:e,i=e=>0|Math.round(e),l=(e,t,s,r,n)=>s==t?r:(e-t)*(n-r)/(s-t)+r,c=e=>{let t=parseFloat(e);return isNaN(t)?0:t},h=e=>{let t=e.match(/\-?\d*\.?\d*/gm);return t?t[0]:"0"},u=(e,t)=>{let s=t.toString().split(".")[1];return Number(e).toFixed(s?s.length:0)},p=()=>"ontouchstart"in window.document.documentElement,m=e=>new Promise(t=>setTimeout(t,e)),f=(e,t=1)=>e[e.length-t],g=e=>navigator.clipboard.writeText(e),d=()=>navigator.clipboard.readText(),b=e=>(new TextEncoder).encode(e),y=e=>(new TextDecoder).decode(e),$=e=>"object"==typeof e&&null!==e?Array.isArray(e)?[...e]:{...e}:e;function w(e,t){if(e===t)return!0;if("object"!=typeof e||"object"!=typeof t||null===e||null===t)return!1;const s=Object.keys(e),r=Object.keys(t);if(s.length!==r.length)return!1;for(let r of s)if(e[r]!==t[r])return!1;return!0}async function T(){let e,t;return{wait:new Promise((s,r)=>{e=s,t=r}),resolve:e,reject:t}}function v(e){const t=[];let s=!1;for(let r=0,n=0,a=0;a<e.length;a++){let o=e[a],i=e[a+1];t[r]=t[r]||[],t[r][n]=t[r][n]||"",'"'==o&&s&&'"'==i?(t[r][n]+=o,++a):'"'!=o?";"!=o&&","!=o||s?"\r"!=o||"\n"!=i||s?"\n"==o&&!s||"\r"==o&&!s?(++r,n=0):t[r][n]+=o:(++r,n=0,++a):++n:s=!s}return t}function C(e){let t=new Uint32Array([0]);for(let s=0;s<e.length;s++)t[0]+=(t[0]<<5)+e.charCodeAt(s);return t[0]}function _(e){let t=new Uint32Array(1);t[0]=0,t[0]=~t[0];let s="string"==typeof e;for(let r=0;r<e.length;r++){t[0]^=s?e[r].charCodeAt(0):e[r];for(let e=0;e<8;e++)t[0]=1&t[0]?t[0]/2^79764919:t[0]/2}return t[0]=~t[0],t[0]}function I(e){if(e){let t=document.createElement("style");t.innerText=e,document.head.appendChild(t)}return null}function x(e){for(;e.firstChild;)e.removeChild(e.lastChild)}const O=()=>(new Date).getTime(),S=e=>new Date(e-6e4*(new Date).getTimezoneOffset());class N{constructor(e,t,s){this.tout=e,this.cb=t,this.time=s}setTime(e){this.time=e}onReady(e){this.cb=e}start(){this.tmr||(this.tout?setTimeout(()=>{this.tmr=null,this.cb()},this.time):setInterval(this.cb,this.time))}restart(){this.stop(),this.start()}stop(){this.tout?clearTimeout(this.tmr):clearInterval(this.tmr),this.tmr=null}running(){return null!=this.tmr}}class M extends N{constructor(e,t){super(!1,e,t)}}class q extends N{constructor(e,t){super(!0,e,t)}}const E=()=>new Promise(e=>requestAnimationFrame(()=>setTimeout(e,0))),j=e=>{if(!Array.isArray(e))return e.clientWidth||e.clientHeight;for(let t of e)if(!j(t))return 0;return 1};async function k(e,t=null,s=10){for(;!j(e)&&--s;)await E();return s||(e=null),t&&t(e),e}const W=e=>"#"+Number(e).toString(16).padStart(6,"0"),A=e=>{let t=e=>parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3],16),s=e=>parseInt(e.slice(1,7),16);if(e&&"#"==e[0])switch(e.length){case 4:return t(e);case 5:return t(e)|parseInt(e[4]+e[4],16)<<24;case 7:return s(e);case 9:return s(e)|parseInt(e.slice(7,9),16)<<24}return 0},F=(e,t,s)=>e<<16|t<<8|s,R=F,P=(e,t,s)=>(248&e)<<8|(252&t)<<3|s>>3,D=(e,t,s)=>192&e|(224&t)>>2|(224&s)>>5,H=e=>[e>>16&255,e>>8&255,255&e,e>>24&255];function U(e,t,s,r){if(!isNaN(t)&&!isNaN(s))return isNaN(r)?`rgb(${e},${t},${s})`:`rgba(${e},${t},${s},${Number.isInteger(r)?r/255:r})`;if("number"==typeof e)return W(e);if("string"==typeof e){if(!e.startsWith("#"))return parseInt(e)?U(parseInt(e)):e;switch(e.length){case 4:case 5:return"#"+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+(5==e.length?e[4]+e[4]:"");case 7:case 9:return e;default:return"#000000"}}}const B=(e,t,s)=>{e%=360;let r=t*Math.min(s,1-s),n=(t,n=(t+e/30)%12)=>s-r*Math.max(Math.min(n-3,9-n,1),-1);return"rgb("+Math.round(255*n(0))+","+Math.round(255*n(8))+","+Math.round(255*n(4))+")"},L=(e,t,s)=>B(e/255*360,t/255,s/255),K=(e,t,s)=>L(e,t,s/2),J=(e,t)=>{let s=0;for(let r=0;r<3;r++){let r=(16711680&e)>>16;r=Math.min(255,Math.floor((r+1)*t)),s<<=8,s|=r,e<<=8}return s},z=e=>{if((e=U(e)).startsWith("#"))return e.slice(1).match(/.{2}/g).map(e=>parseInt(e,16));if(e.startsWith("rgb")){let t=e.match(/\((.+?)\)/);if(t)return t[1].split(",").map(Number)}return[0,0,0]},G=e=>{let t=0;return z(e).forEach((e,s)=>s<3&&(t+=e)),t/3},Q=e=>(e=z(e),Math.max(...e)-Math.min(...e)),X=(e,t=128)=>G(e)<t?"white":"black";class Y{constructor(e,t){this.send_cb=e,this.period=t}async send(e,t=!0){if(this.sending)this.cache=e;else if(this.sending=!0,await this.send_cb(e),await m(this.period),this.sending=!1,void 0!==this.cache&&(t||!w(this.cache,e))){let e=this.cache;this.cache=void 0,this.send(e)}}}function V(e,t){let s=document.createElement("a");s.href=window.URL.createObjectURL(e),s.download=t,s.click()}function Z(e,t,s){return new Promise(r=>{let n=new XMLHttpRequest;n.onreadystatechange=()=>{n.readyState==XMLHttpRequest.DONE&&r(200==n.status)},n.upload.onprogress=e=>{e.lengthComputable&&s(parseInt(e.loaded/e.total*100))},n.onerror=e=>r(!1),n.open("POST",e,!0),n.send(t)})}async function ee(e,t={}){let s,r,n=null;t.timeout&&(s=new AbortController,r=setTimeout(()=>s.abort(),t.timeout),t.signal=s.signal);try{n=await fetch(e,t)}catch(e){}return clearTimeout(r),n&&n.ok?n:null}async function te(e,t=5e3){return ee(e,{timeout:t})}class se{clear(){this._queue.forEach(e=>e.res(null)),this._queue=[]}async fetch(e,t){return new Promise(s=>{this._queue.push({url:e,params:t,res:s}),1==this._queue.length&&this._next()})}async _next(){let e=this._queue[0];e.res(await ee(e.url,e.params)),this._queue.shift(),this._queue.length&&this._next()}_queue=[]}class re{ontext=null;constructor(e=/\r?\n/,t=!1){this._eol=e,this._skip=t}reset(){this._buf=""}write(e){if(!this.ontext)return;this._buf+=e;let t=this._buf.split(this._eol);1!=t.length&&(t[t.length-1].length?this._buf=t.pop():(this._buf="",t.pop()),this._skip&&(t.shift(),this._skip=!1),t.forEach(e=>this.ontext(e)))}_buf=""}class ne{constructor(){this.events={}}on(e,t){return this.events[e]||(this.events[e]=[]),this.events[e].push(t),()=>this.off(e,t)}once(e,t){const s=this.on(e,(...e)=>{s(),t(...e)})}emit(e,...t){if(this.events[e])for(let s of this.events[e])s(...t)}off(e,t){this.events[e]&&(this.events[e]=this.events[e].filter(e=>e!==t))}offAll(e){delete this.events[e]}}class ae{static has(e){return localStorage.hasOwnProperty(e)}static get(e){return JSON.parse(localStorage.getItem(e))}static remove(e){localStorage.removeItem(e)}static set(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(e){console.error(e)}}static init(e,t){ae.has(e)||ae.set(e,t)}}function oe(e,t=0){if(t>10)return e;const s=[];return function(e){const t=e.split("\n");let s="",r=[];for(let e of t){const t=/^(\s*)([-]|\d+\.)\s+(.*)$/.exec(e);if(t){const e=t[1].length,n=t[2].match(/^\d/)?"ol":"ul",a=t[3],o=Math.floor(e/2);if(!r.length){s+=`<${n}><li>${a}`,r.push({type:n,level:o});continue}const i=r[r.length-1];if(o>i.level)s+=`<${n}><li>${a}`,r.push({type:n,level:o});else if(o===i.level)s+=`</li><li>${a}`;else{for(;r.length&&r[r.length-1].level>=o;)s+=`</li></${r.pop().type}>`;r.length&&r[r.length-1].type===n?s+=`<li>${a}`:(s+=`<${n}><li>${a}`,r.push({type:n,level:o}))}}else{for(;r.length;)s+=`</li></${r.pop().type}>`;s+=e+"\n"}}for(;r.length;)s+=`</li></${r.pop().type}>`;return s}(e=e.replace(/```([\s\S]*?)```/g,(e,t)=>{const r=s.length;return s.push(`<pre><code>${t.replace(/[&<>"']/g,e=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}[e]))}</code></pre>`),`§CODEBLOCK${r}§`})).replace(/^---$/gm,"<hr>").replace(/!\[([^\]]*)\]\(([^)]+)\)/g,'<img src="$2" alt="$1">').replace(/^###### (.*)$/gm,"<h6>$1</h6>").replace(/^##### (.*)$/gm,"<h5>$1</h5>").replace(/^#### (.*)$/gm,"<h4>$1</h4>").replace(/^### (.*)$/gm,"<h3>$1</h3>").replace(/^## (.*)$/gm,"<h2>$1</h2>").replace(/^# (.*)$/gm,"<h1>$1</h1>").replace(/(^>.*(?:\n>.*)*)/gm,e=>`<blockquote>${oe(e.split("\n").map(e=>e.replace(/^>\s?/,"")).join("\n"),t+1)}</blockquote>`).replace(/\[spoiler="([^"]+)"\]([\s\S]*?)\[\/spoiler\]/g,(e,s,r)=>`<details><summary>${s}</summary>${oe(r,t+1)}</details>`).replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2">$1</a>').replace(/`([^`]+)`/g,"<code>$1</code>").replace(/\*\*(.+?)\*\*/g,"<strong>$1</strong>").replace(/(^|[\s>])\*([^*\s][^*]*?)\*(?=[\s<]|$)/g,"$1<em>$2</em>").replace(/^(?!<h\d|<ul|<ol|<pre|<p|<blockquote|<code|<hr|<img|<details|<summary)(.+)$/gm,"<p>$1</p>").replace(/§CODEBLOCK(\d+)§/g,(e,t)=>s[t])}const ie=t.TH,le=t.bk,ce=t.uJ,he=t.K9,ue=t.IX,pe=t.LS,me=t.Y4,fe=t.Ep,ge=t.M4,de=t.TD,be=t.f9,ye=t.no,$e=t.w_,we=t.Pw,Te=t.OB,ve=t.E8,Ce=t.AU,_e=t.aP,Ie=t.QR,xe=t.g7,Oe=t.uj,Se=t.WY,Ne=t.RG,Me=t.wx,qe=t.Bw,Ee=t.Us,je=t.Kg,ke=t.FG,We=t.tW,Ae=t.de,Fe=t.bm,Re=t.RI,Pe=t.zA,De=t.wW,He=t.CI,Ue=t.HV,Be=t.HJ,Le=t.sK,Ke=t._g,Je=t.UQ,ze=t.Tj,Ge=t.Wm,Qe=t.tB,Xe=t.CO,Ye=t.oC,Ve=t.tI,Ze=t.F2,et=t.yT,tt=t.HO,st=t.px,rt=t.bC,nt=t.FW,at=t.Fn,ot=t.u0,it=t.bN,lt=t.yy,ct=t.qz,ht=t.j9,ut=t.gh;export{ie as DelaySender,le as EventEmitter,ce as FetchQueue,he as HEXtoRGB,ue as Interval,pe as LS,me as StreamSplitter,fe as Timeout,ge as Timer,de as addStyle,be as adjustColor,ye as checkRender,$e as clearNode,we as clipRead,Te as clipWrite,ve as colorToInt,Ce as constrain,_e as contrastColor,Ie as crc32,xe as decodeText,Oe as degrees,Se as deltaColor,Ne as download,Me as encodeText,qe as fetchT,Ee as fetchTimeout,je as findFloat,ke as formatToStep,We as hash,Ae as hsl2rgb,Fe as hsl2rgb8,Re as hsv2rgb8,Pe as httpPost,De as intToColor,He as isTouch,Ue as last,Be as localTime,Le as makeCopy,Ke as makeDefer,Je as makeWebColor,ze as map,Ge as midColor,Qe as now,Xe as parseCSV,Ye as parseFloatNoNaN,Ve as parseMD,Ze as radians,et as random,tt as randomInt,st as rgbTo233,rt as rgbTo24,nt as rgbTo565,at as rgbTo888,ot as roundInt,it as shallowEqual,lt as sleep,ct as splitColor,ht as waitFrame,ut as waitRender};